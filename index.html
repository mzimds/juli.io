<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MEMO - Don’t Mess With My Notes</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header class="header">
    <div class="logo">
      <span>MEMO</span>
    </div>
    
    <div class="user-info hidden" id="userInfo">
      <div class="user-avatar" id="userAvatar">A</div>
      <div class="user-name" id="userName">Dr. Ana</div>
      <button class="btn-logout" id="logoutBtn" title="Sair">
        <i class="fas fa-sign-out-alt"></i>
      </button>
    </div>
  </header>

  <!-- Área de Autenticação -->
  <div class="auth-container" id="authContainer">
    <div class="auth-card" id="loginCard">
      <div class="auth-header">
        <h2 class="auth-title">Acessar o Sistema</h2>
        <p class="auth-subtitle">Entre com suas credenciais</p>
      </div>
      
      <form id="loginForm">
        <div class="form-group">
          <label for="loginEmail" class="form-label">E-mail</label>
          <input type="email" id="loginEmail" class="form-input" placeholder="Digite seu e-mail" required />
          <div class="error-message" id="loginEmailError">Por favor, insira um e-mail válido</div>
        </div>
        
        <div class="form-group">
          <label for="loginPassword" class="form-label">Senha</label>
          <input type="password" id="loginPassword" class="form-input" placeholder="Digite sua senha" required />
          <div class="error-message" id="loginPasswordError">A senha deve ter pelo menos 6 caracteres</div>
        </div>
        
        <div class="form-group">
          <label>
            <input type="checkbox" id="manterConectado"> Manter conectado
          </label>
        </div>
        
        <button type="submit" class="btn btn-primary">
          Entrar
        </button>
        
        <div class="text-center mt-3">
          <p>Não tem uma conta? <button type="button" class="btn-link" id="showRegisterBtn">Cadastre-se</button></p>
        </div>
      </form>
    </div>
    
    <div class="auth-card hidden" id="registerCard">
      <div class="auth-header">
        <h2 class="auth-title">Criar Conta</h2>
        <p class="auth-subtitle">Preencha os campos abaixo</p>
      </div>
      
      <form id="registerForm">
        <div class="form-group">
          <label for="registerName" class="form-label">Nome Completo</label>
          <input type="text" id="registerName" class="form-input" placeholder="Nome completo" required />
          <div class="error-message" id="registerNameError">Por favor, insira seu nome completo</div>
        </div>
        
        <div class="form-group">
          <label for="registerEmail" class="form-label">E-mail</label>
          <input type="email" id="registerEmail" class="form-input" placeholder="exemplo@email.com" required />
          <div class="error-message" id="registerEmailError">Por favor, insira um e-mail válido</div>
        </div>
        
        <div class="form-group">
          <label for="registerPassword" class="form-label">Senha</label>
          <input type="password" id="registerPassword" class="form-input" placeholder="Digite sua senha" required />
          <div class="error-message" id="registerPasswordError">A senha deve ter pelo menos 6 caracteres</div>
        </div>
        
        <div class="form-group">
          <label for="registerConfirmPassword" class="form-label">Confirmar Senha</label>
          <input type="password" id="registerConfirmPassword" class="form-input" placeholder="Digite sua senha" required />
          <div class="error-message" id="registerConfirmPasswordError">As senhas não coincidem</div>
        </div>
        
        <div class="form-group">
          <label for="registerRole" class="form-label">Função</label>
          <select id="registerRole" class="form-input" required>
            <option value="">Selecione sua função</option>
            <option value="medico">Médico</option>
            <option value="gestor">Gestor</option>
          </select>
          <div class="error-message" id="registerRoleError">Por favor, selecione sua função</div>
        </div>
        
        <div class="form-group hidden" id="codeField">
          <label for="registerCode" class="form-label">Código do Setor</label>
          <input type="text" id="registerCode" class="form-input" placeholder="Código" />
          <div class="error-message" id="registerCodeError">Por favor, insira um código válido</div>
        </div>
        
        <div class="modal-actions">
          <button type="button" class="btn btn-secondary" id="backToLoginBtn">
            Voltar
          </button>
          <button type="submit" class="btn btn-primary">
            Cadastrar
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- Sistema Principal (após login) -->
  <div id="appContainer" class="hidden">
    <nav class="tabs" id="tabs">
      <button class="tab active" data-tab="ativos">
        Ativos
      </button>
      <button class="tab" data-tab="altas">
        Altas
      </button>
      <button class="tab" data-tab="historico">
        Histórico
      </button>
      <button class="tab" data-tab="config">
        Configurações
      </button>
    </nav>

    <div class="search-container" id="searchContainer">
      <div class="search-wrapper">
        <i class="fas fa-search search-icon"></i>
        <input type="text" id="searchInput" class="search-input" placeholder="Buscar paciente..." />
      </div>
    </div>

    <main class="patient-list" id="patientList"></main>

    <div class="fab-container" id="fabContainer">
      <button class="fab encerrar" id="encerrarBtn" title="Encerrar Plantão">
        <i class="fas fa-stopwatch"></i>
      </button>
      <button class="fab" id="addPatientBtn" title="Adicionar Paciente">
        <i class="fas fa-plus"></i>
      </button>
    </div>

    <!-- Modal: Adicionar/Editar Paciente -->
    <div class="modal" id="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2 class="modal-title" id="modalTitulo">Novo Paciente</h2>
          <button class="btn-close">&times;</button>
        </div>
        <div class="modal-body">
          <div class="form-group">
            <label for="nomePaciente" class="form-label">Nome do Paciente*</label>
            <input type="text" id="nomePaciente" class="form-input" required />
          </div>
          
          <div class="form-group">
            <label for="setorPaciente" class="form-label">Setor*</label>
            <input type="text" id="setorPaciente" class="form-input" placeholder="Ex: Clínica Médica" required />
          </div>
          
          <div class="form-group">
            <label for="sexoPaciente" class="form-label">Sexo*</label>
            <select id="sexoPaciente" class="form-input" required>
              <option value="">Selecione</option>
              <option value="Masculino">Masculino</option>
              <option value="Feminino">Feminino</option>
            </select>
          </div>
          
          <div class="form-group">
            <label for="leitoPaciente" class="form-label">Leito*</label>
            <input type="text" id="leitoPaciente" class="form-input" placeholder="Número" required />
          </div>
          
          <div class="form-group">
            <label for="atendimentoPaciente" class="form-label">Número do Atendimento*</label>
            <input type="text" id="atendimentoPaciente" class="form-input" required />
          </div>
          
          <div class="form-group">
            <label for="statusPaciente" class="form-label">Status</label>
            <select id="statusPaciente" class="form-input">
              <option value="ativos">Ativo</option>
              <option value="altas">Alta</option>
            </select>
          </div>
          
          <div class="form-group">
            <label for="descricaoPaciente" class="form-label">Resumo Clínico</label>
            <textarea id="descricaoPaciente" class="form-input" placeholder="Resumo clínico..." rows="4"></textarea>
          </div>
        </div>
        <div class="modal-actions">
          <button class="btn btn-secondary" id="fecharModal">Cancelar</button>
          <button class="btn btn-primary" id="salvarPaciente">Salvar</button>
        </div>
      </div>
    </div>

    <!-- Modal: Nova Anotação -->
    <div class="modal" id="modalNota">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Nova Anotação</h2>
          <button class="btn-close">&times;</button>
        </div>
        <div class="modal-body">
          <textarea id="novaNota" class="form-input" placeholder="Descreva a anotação..." rows="6"></textarea>
        </div>
        <div class="modal-actions">
          <button class="btn btn-secondary" id="fecharNota">Cancelar</button>
          <button class="btn btn-primary" id="salvarNota">Salvar</button>
        </div>
      </div>
    </div>

    <!-- Modal: Encerrar Plantão -->
    <div class="modal" id="modalEncerrar">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Encerrar Plantão</h2>
          <button class="btn-close">&times;</button>
        </div>
        <div class="modal-body">
          <p class="mt-2"><strong>Médico que receberá:</strong></p>
          <div class="form-group">
            <select id="medicoDestino" class="form-input">
              <option>Dr. Ana</option>
              <option>Dr. Bruno</option>
              <option>Dra. Carla</option>
              <option>Dr. Daniel</option>
            </select>
          </div>
          
          <div class="form-group">
            <h3>Checklist</h3>
            <div class="form-group">
              <label>
                <input type="checkbox" id="checklist1"> Todos os pacientes foram revisados
              </label>
            </div>
            <div class="form-group">
              <label>
                <input type="checkbox" id="checklist2"> Todas as pendências foram resolvidas
              </label>
            </div>
            <div class="form-group">
              <label>
                <input type="checkbox" id="checklist3"> Documentação completa
              </label>
            </div>
          </div>
          
          <p class="assinatura mt-3">Assinatura: <strong id="assinaturaUser"></strong></p>
        </div>
        <div class="modal-actions">
          <button class="btn btn-secondary" id="fecharEncerrar">Cancelar</button>
          <button class="btn btn-primary" id="confirmarEncerramento">Confirmar</button>
        </div>
      </div>
    </div>

    <!-- Modal: Histórico do Paciente -->
    <div class="modal" id="modalHistorico">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Histórico Completo</h2>
          <button class="btn-close">&times;</button>
        </div>
        <div class="modal-body">
          <div class="info-section">
            <h3 id="historicoNome" class="mb-2"></h3>
            <div class="info-grid">
              <div>Setor:</div>
              <div id="historicoSetor"></div>
              <div>Leito:</div>
              <div id="historicoLeito"></div>
              <div>Atendimento:</div>
              <div id="historicoAtendimento"></div>
              <div>Sexo:</div>
              <div id="historicoSexo"></div>
              <div>Status:</div>
              <div id="historicoStatus"></div>
            </div>
          </div>
          
          <div class="info-section">
            <h4>Resumo Clínico</h4>
            <div id="historicoDescricao" class="card-content"></div>
          </div>
          
          <div class="info-section" id="historicoAnotacoesSection">
            <h4>Anotações</h4>
            <div id="historicoAnotacoes"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal: Histórico do Plantão -->
    <div class="modal" id="modalPlantao">
      <div class="modal-content">
        <div class="modal-header">
          <h2 class="modal-title">Histórico do Plantão</h2>
          <button class="btn-close">&times;</button>
        </div>
        <div class="modal-body">
          <div class="plantao-header">
            <div class="info-grid">
              <div>Data:</div>
              <div id="plantaoData"></div>
              <div>Médico:</div>
              <div id="plantaoMedico"></div>
              <div>Destino:</div>
              <div id="plantaoDestino"></div>
              <div>Pacientes:</div>
              <div id="plantaoPacientesCount"></div>
              <div>Altas:</div>
              <div id="plantaoAltasCount"></div>
            </div>
          </div>
          
          <div class="info-section">
            <h3>Pacientes</h3>
            <div class="plantao-pacientes" id="plantaoPacientes"></div>
          </div>
          
          <div class="plantao-log">
            <h3 class="log-title">Log de Ações</h3>
            <div id="plantaoLog"></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div id="toast" class="toast">
    <i class="fas fa-check-circle"></i>
    <span>Mensagem</span>
  </div>
  
  <div id="copiedMessage" class="copied-message">Código copiado!</div>
  
  <!-- Importação de módulos JavaScript -->
<script type="module" src="api.js"></script>
<script type="module" src="utils.js"></script>
<script type="module" src="auth.js"></script> <!-- Adicione esta linha -->
<script type="module" src="modalPaciente.js"></script>
<script type="module" src="plantao.js"></script>
<script type="module" src="historico.js"></script>
<script type="module" src="config.js"></script>
<script type="module" src="main.js"></script>
</body>
</html>