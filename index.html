<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DONTMED - Sistema de Plant√£o M√©dico</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #2c7da0;
            --primary-dark: #1a5276;
            --secondary: #468faf;
            --light: #ffffff;
            --dark: #333333;
            --darker: #222222;
            --danger: #e74c3c;
            --success: #2ecc71;
            --warning: #f39c12;
            --pass-plantao: #2ecc71;
            --gray: #95a5a6;
            --light-gray: #f5f5f5;
            --border: rgba(0, 0, 0, 0.1);
            --sidebar-width: 280px;
            --header-height: 60px;
            --shadow-sm: 0 1px 3px rgba(0,0,0,0.08);
            --shadow-md: 0 4px 6px rgba(0,0,0,0.05);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
        }

        body {
            background: var(--light);
            color: var(--dark);
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            min-height: -webkit-fill-available;
        }

        .card {
            background: var(--light);
            border: 1px solid var(--border);
            box-shadow: var(--shadow-sm);
            border-radius: 8px;
        }

        header {
            height: var(--header-height);
            background: var(--light);
            color: var(--darker);
            padding: 0 15px;
            display: flex;
            align-items: center;
            position: relative;
            z-index: 100;
            box-shadow: var(--shadow-sm);
            border-bottom: 1px solid var(--border);
        }

        .logo {
            font-weight: 700;
            font-size: 1.5rem;
            letter-spacing: -0.5px;
            font-family: 'Inter', sans-serif;
            font-weight: 800;
            margin-right: auto;
            color: var(--darker);
        }

        .header-info {
            display: flex;
            align-items: center;
            gap: 15px;
            font-size: 0.9rem;
            color: var(--dark);
        }

        .container {
            display: flex;
            flex: 1;
            overflow: hidden;
            padding: 12px;
            gap: 12px;
            background: var(--light-gray);
            height: calc(100dvh - var(--header-height));
            min-height: 0;
        }

        .sidebar {
            width: var(--sidebar-width);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            transition: transform 0.3s ease;
        }

        .section-header {
            padding: 12px 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid var(--border);
        }

        .section-title {
            font-weight: 600;
            color: var(--darker);
            font-size: 1.1rem;
        }

        .btn {
            padding: 8px 12px;
            background: var(--darker);
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.2s ease;
            font-weight: 500;
            box-shadow: var(--shadow-sm);
        }

        .btn:hover {
            background: var(--dark);
            transform: translateY(-1px);
            box-shadow: var(--shadow-md);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn-danger {
            background: var(--danger);
        }

        .btn-success {
            background: var(--success);
        }

        .btn-pass {
            background: var(--pass-plantao);
        }

        .search-container {
            padding: 12px;
            border-bottom: 1px solid var(--border);
            position: relative;
        }

        .search-box {
            position: relative;
        }

        .search-box input {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid var(--border);
            border-radius: 6px;
            font-size: 0.95rem;
            background: var(--light);
            transition: all 0.2s ease;
            font-family: 'Inter', sans-serif;
            box-shadow: var(--shadow-sm);
        }

        .search-box input:focus {
            background: white;
            box-shadow: 0 0 0 2px rgba(44, 125, 160, 0.2);
            outline: none;
            border-color: var(--primary);
        }

        .autocomplete-container {
            position: absolute;
            top: calc(100% + 5px);
            left: 0;
            right: 0;
            background: white;
            border-radius: 8px;
            box-shadow: var(--shadow-md);
            z-index: 200;
            max-height: 300px;
            overflow-y: auto;
            display: none;
        }
        
        .autocomplete-container.visible {
            display: block;
        }
        
        .autocomplete-header {
            display: none;
        }
        
        .autocomplete-item {
            padding: 10px 15px;
            cursor: pointer;
            transition: background-color 0.2s;
            display: flex;
            align-items: center;
        }
        
        .autocomplete-item:hover {
            background-color: rgba(44, 125, 160, 0.05);
        }
        
        .autocomplete-icon {
            margin-right: 10px;
            font-size: 1.2rem;
            color: var(--primary);
        }
        
        .highlight {
            background-color: rgba(255, 217, 0, 0.3);
            font-weight: 600;
            padding: 0 2px;
            border-radius: 3px;
        }

        .scrollable-content {
            flex: 1;
            overflow-y: auto;
            padding: 8px 0;
        }

        .setor-item {
            padding: 12px 15px;
            cursor: pointer;
            transition: background-color 0.2s;
            border-left: 3px solid transparent;
            margin: 4px 8px;
            border-radius: 6px;
            background: var(--light);
            box-shadow: var(--shadow-sm);
        }

        .setor-item:hover {
            background-color: rgba(44, 125, 160, 0.05);
        }

        .setor-item.active {
            background-color: rgba(0, 0, 0, 0.03);
        }

        .setor-name {
            font-weight: 600;
            margin-bottom: 5px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: var(--darker);
        }

        .pacientes-container {
            margin-top: 8px;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
            padding: 0;
        }

        .setor-item.expanded .pacientes-container {
            max-height: 1000px;
        }

        .paciente-item {
            padding: 10px;
            border-bottom: 1px dashed var(--border);
            border-radius: 6px;
            margin: 5px 0;
            transition: all 0.2s ease;
            background: var(--light);
            display: flex;
            align-items: center;
        }

        .paciente-item:hover {
            background-color: rgba(44, 125, 160, 0.05);
        }

        .paciente-item:last-child {
            border-bottom: none;
        }

        .paciente-info {
            flex: 1;
            min-width: 0;
        }

        .paciente-name {
            font-weight: 600;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            font-size: 0.95rem;
            margin-bottom: 4px;
            color: var(--darker);
        }

        .paciente-details {
            font-size: 0.82rem;
            color: var(--gray);
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            align-items: center;
        }

        .badge {
            font-size: 0.75rem;
            padding: 3px 8px;
            border-radius: 10px;
            background-color: rgba(44, 125, 160, 0.1);
            color: var(--primary-dark);
            font-weight: 500;
        }

        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            box-shadow: var(--shadow-sm);
            min-height: 0;
        }

        .patient-header {
            padding: 12px 20px;
            border-bottom: 1px solid var(--border);
            display: flex;
            flex-direction: column;
            gap: 8px;
            background: var(--light);
        }

        .patient-title {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--darker);
            letter-spacing: -0.3px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .soap-tabs {
            display: flex;
            background-color: white;
            border-bottom: 1px solid var(--border);
            background: var(--light);
            overflow-x: auto;
        }

        .soap-tab {
            padding: 10px 15px;
            cursor: pointer;
            font-weight: 600;
            color: var(--gray);
            border-bottom: 3px solid transparent;
            transition: all 0.2s ease;
            font-size: 0.92rem;
            white-space: nowrap;
        }

        .soap-tab:hover {
            color: var(--darker);
            background: rgba(44, 125, 160, 0.05);
        }

        .soap-tab.active {
            color: var(--darker);
            border-bottom: 3px solid var(--darker);
            background: rgba(44, 125, 160, 0.08);
        }

        .editor-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            background: var(--light);
            min-height: 0;
            height: 100%;
        }

        .editor-content {
            flex: 1;
            display: none;
            flex-direction: column;
            padding: 12px;
            overflow: hidden;
            min-height: 0;
        }

        .editor-content.active {
            display: flex;
        }

        .editor-header {
            margin-bottom: 10px;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .editor-title {
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--darker);
        }

        .quick-actions {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .quick-action {
            padding: 6px 10px;
            background: var(--light);
            border: 1px solid var(--border);
            border-radius: 6px;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.2s ease;
            font-weight: 500;
            box-shadow: var(--shadow-sm);
        }

        .quick-action:hover {
            background: rgba(44, 125, 160, 0.1);
            transform: translateY(-1px);
            box-shadow: var(--shadow-md);
        }

        .textarea-container {
            position: relative;
            flex: 1;
            min-height: 100px;
            overflow: hidden;
        }

        .soap-textarea {
            width: 100%;
            height: 100%;
            padding: 12px;
            border: 1px solid var(--border);
            border-radius: 6px;
            resize: none;
            font-size: 1rem;
            line-height: 1.5;
            font-family: 'Inter', sans-serif;
            background: var(--light);
            transition: all 0.2s ease;
            box-shadow: var(--shadow-sm);
        }

        .soap-textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 2px rgba(44, 125, 160, 0.2);
        }

        .mobile-menu-btn {
            display: none;
            background: none;
            border: none;
            cursor: pointer;
            margin-right: 12px;
            width: 30px;
            height: 30px;
            position: relative;
            z-index: 110;
        }

        .mobile-menu-btn span,
        .mobile-menu-btn span::before,
        .mobile-menu-btn span::after {
            content: '';
            position: absolute;
            width: 100%;
            height: 3px;
            background: var(--darker);
            border-radius: 2px;
            transition: all 0.3s ease;
            left: 0;
        }

        .mobile-menu-btn span {
            top: 50%;
            transform: translateY(-50%);
        }

        .mobile-menu-btn span::before {
            top: -8px;
        }

        .mobile-menu-btn span::after {
            top: 8px;
        }

        .mobile-menu-btn.open span {
            background: transparent;
        }

        .mobile-menu-btn.open span::before {
            top: 0;
            transform: rotate(45deg);
        }

        .mobile-menu-btn.open span::after {
            top: 0;
            transform: rotate(-45deg);
        }

        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            z-index: 1000;
            display: flex;
            justify-content: center;
            align-items: center;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .modal.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            width: 90%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
            padding: 20px;
            border-radius: 10px;
            transform: translateY(20px);
            transition: transform 0.3s ease;
            background: var(--light);
            box-shadow: var(--shadow-md);
        }

        .modal.active .modal-content {
            transform: translateY(0);
        }

        .modal-header {
            margin-bottom: 15px;
            padding-bottom: 12px;
            border-bottom: 1px solid var(--border);
        }

        .modal-title {
            font-size: 1.4rem;
            font-weight: 700;
            color: var(--darker);
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 6px;
            font-weight: 600;
            color: var(--dark);
        }

        .form-control {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid var(--border);
            border-radius: 6px;
            font-size: 0.95rem;
            font-family: 'Inter', sans-serif;
            background: var(--light);
            transition: all 0.2s ease;
            box-shadow: var(--shadow-sm);
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 2px rgba(44, 125, 160, 0.2);
        }

        .modal-footer {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-top: 15px;
        }

        .toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            padding: 12px 20px;
            border-radius: 6px;
            background: var(--darker);
            color: white;
            font-weight: 500;
            box-shadow: var(--shadow-md);
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.3s ease;
            z-index: 2000;
            max-width: 320px;
            display: flex;
            align-items: center;
        }

        .toast.show {
            opacity: 1;
            transform: translateY(0);
        }

        .toast-success {
            background: var(--success);
        }

        .toast-success::before {
            content: "‚úì";
            margin-right: 10px;
            font-size: 1.2rem;
        }

        .toast-error {
            background: var(--danger);
        }

        .toast-error::before {
            content: "‚ö†";
            margin-right: 10px;
            font-size: 1.2rem;
        }

        @keyframes toastIn {
            0% { transform: translateX(100%); opacity: 0; }
            100% { transform: translateX(0); opacity: 1; }
        }

        .toast.show {
            animation: toastIn 0.5s forwards;
        }

        .save-indicator {
            position: absolute;
            bottom: 10px;
            right: 10px;
            font-size: 0.75rem;
            color: var(--success);
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .save-indicator.show {
            opacity: 1;
        }

        .loader {
            display: inline-block;
            width: 12px;
            height: 12px;
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s linear infinite;
            margin-right: 8px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .setor-name span:last-child {
            background: rgba(44, 125, 160, 0.1);
            padding: 2px 8px;
            border-radius: 10px;
            font-weight: 600;
        }

        .disabled {
            opacity: 0.5;
            pointer-events: none;
        }

        /* Novos estilos para alta */
        .alta-badge {
            background: var(--success) !important;
            color: white !important;
            margin-left: 8px;
            padding: 2px 8px !important;
            border-radius: 12px !important;
            font-size: 0.75rem !important;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }

        .alta-item {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 0.85rem;
            color: var(--success);
            font-weight: 600;
        }

        /* Estilos para chat */
        .chat-history {
            flex: 1;
            overflow-y: auto;
            padding: 10px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            min-height: 0;
        }

        .message {
            max-width: 100%;
            padding: 8px 0;
            position: relative;
            background: none !important;
            box-shadow: none !important;
            border-radius: 0;
            color: var(--dark);
        }

        .message-doctor {
            align-self: flex-end;
            text-align: right;
        }

        .message-system {
            align-self: center;
            text-align: center;
            font-style: italic;
            color: var(--gray);
        }

        .message-timestamp {
            font-size: 0.7rem;
            opacity: 0.7;
            margin-top: 2px;
            color: var(--gray);
        }

        .message-signature {
            font-size: 0.8rem;
            color: var(--gray);
            margin-top: 4px;
        }

        .message-input-container {
            position: relative;
            display: flex;
            padding: 15px 15px;
            background: var(--light);
            border-radius: 0 0 8px 8px;
            box-shadow: 0 -1px 4px rgba(0,0,0,0.05);
            border-top: 1px solid var(--border);
            margin-top: auto;
        }

        .message-input {
            flex: 1;
            padding: 10px 50px 10px 12px;
            border: 1px solid var(--border);
            border-radius: 20px;
            resize: none;
            font-size: 0.95rem;
            font-family: 'Inter', sans-serif;
            min-height: 40px;
            max-height: 150px;
            background: var(--light);
            box-shadow: inset 0 1px 2px rgba(0,0,0,0.05);
        }

        .message-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: inset 0 1px 2px rgba(0,0,0,0.05), 0 0 0 2px rgba(44, 125, 160, 0.2);
        }

        .btn-send {
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            background: var(--pass-plantao);
            color: white;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }

        .btn-send:disabled {
            background: var(--gray);
            cursor: not-allowed;
        }

        /* Progress bar */
        .progress-container {
            margin-bottom: 15px;
        }
        
        .progress-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
        }
        
        .progress-bar {
            height: 4px;
            background: var(--light-gray);
            border-radius: 2px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: var(--darker);
            border-radius: 2px;
        }

        /* Header compacto do paciente */
        .patient-title-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            gap: 5px;
        }

        .patient-details {
            display: none;
            flex-direction: column;
            gap: 5px;
            font-size: 0.9rem;
            color: var(--dark);
            padding-top: 8px;
            border-top: 1px solid var(--border);
            margin-top: 8px;
        }

        .patient-title-wrapper {
            display: flex;
            align-items: center;
            gap: 5px;
            flex: 1;
            min-width: 0;
        }

        .patient-title {
            flex: 1;
            min-width: 0;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .patient-toggle-icon {
            cursor: pointer;
            color: var(--gray);
            font-size: 0.9rem;
            display: none;
            align-self: center;
            flex-shrink: 0;
            margin: 0 10px;
            transition: transform 0.2s;
        }

        #btnAlta {
            display: none;
            margin-top: 0;
            margin-right: 10px;
            align-self: center;
        }

        .btn-alta-visible {
            display: block;
        }
        
        /* Estado inicial quando nenhum paciente selecionado */
        .empty-state {
            display: flex;
            flex: 1;
            align-items: center;
            justify-content: center;
            padding: 20px;
            text-align: center;
        }

        .empty-content {
            max-width: 500px;
        }

        .empty-icon {
            font-size: 4rem;
            margin-bottom: 20px;
            opacity: 0.7;
        }

        .empty-state h3 {
            font-size: 1.5rem;
            margin-bottom: 15px;
            color: var(--darker);
        }

        .empty-state p {
            color: var(--gray);
            margin-bottom: 25px;
            line-height: 1.6;
        }

        .empty-actions {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .empty-actions .btn {
            padding: 12px 20px;
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 500;
        }

        .empty-actions .btn span {
            font-size: 1.2rem;
        }

        /* Bot√£o Passar Plant√£o dentro da sidebar (mobile) */
        .pass-plantao-sidebar {
            padding: 15px;
            border-top: 1px solid var(--border);
            display: none;
        }
        
        /* Bot√£o Passar Plant√£o mobile - Ajustes para UX */
        .pass-plantao-sidebar .btn {
            width: 100%;
            padding: 15px;
            font-size: 1.1rem;
            font-weight: 600;
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* Turnos no modal de setor */
        .turno-section {
            margin-bottom: 15px;
            padding: 15px;
            background: var(--light-gray);
            border-radius: 8px;
            position: relative;
            border: 1px solid var(--border);
        }

        .turno-section h4 {
            margin-bottom: 10px;
            font-size: 1rem;
            color: var(--darker);
        }

        .turno-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        .btn-remove-turno {
            position: absolute;
            top: 10px;
            right: 10px;
            background: none;
            border: none;
            color: var(--danger);
            cursor: pointer;
            font-size: 1.2rem;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }

        .btn-remove-turno:hover {
            background: rgba(231, 76, 60, 0.1);
        }

        .error-message {
            color: var(--danger);
            font-size: 0.8rem;
            margin-top: 5px;
            display: none;
        }

        .has-error {
            border-color: var(--danger) !important;
        }

        ::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(0,0,0,0.05);
            border-radius: 8px;
        }

        ::-webkit-scrollbar-thumb {
            background: rgba(180, 180, 180, 0.5);
            border-radius: 8px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: rgba(150, 150, 150, 0.7);
        }

        @media (max-width: 992px) {
            .sidebar {
                position: absolute;
                left: 0;
                top: var(--header-height);
                bottom: 0;
                z-index: 90;
                transform: translateX(-100%);
                width: 100%;
                max-width: 320px;
                box-shadow: var(--shadow-md);
            }

            .sidebar.open {
                transform: translateX(0);
            }

            .mobile-menu-btn {
                display: block;
            }

            .container {
                padding: 8px;
                height: calc(100dvh - var(--header-height) - 16px);
            }
            
            .main-content {
                max-height: calc(100dvh - var(--header-height) - 16px);
            }

            .quick-actions {
                overflow-x: auto;
                padding-bottom: 8px;
                flex-wrap: nowrap;
                -ms-overflow-style: none;
                scrollbar-width: none;
            }
            
            .quick-actions::-webkit-scrollbar {
                display: none;
            }
            
            .quick-action {
                flex-shrink: 0;
            }

            .editor-container {
                min-height: 0;
                height: 100%;
            }

            .message-input-container {
                padding: 8px;
            }

            #btnPassPlantaoHeader {
                display: none !important;
            }

            .pass-plantao-sidebar {
                display: block;
            }

            .patient-title-container {
                flex-direction: row;
                flex-wrap: wrap;
                align-items: center;
                justify-content: space-between;
            }
            
            .patient-title-wrapper {
                flex: 1;
                min-width: 0;
            }
            
            .patient-toggle-icon {
                display: block;
                margin: 0;
            }
            
            .patient-title {
                display: flex;
                align-items: center;
                gap: 8px;
            }
            
            #btnAlta {
                align-self: center;
                margin-top: 0;
            }

            .btn-alta-visible {
                display: inline-block !important;
                margin-left: auto;
                flex-shrink: 0;
                padding: 6px 10px;
                white-space: nowrap;
            }
        }

        @media (min-width: 993px) {
            .pass-plantao-sidebar {
                display: none;
            }
            
            .btn-pass-header {
                display: block !important;
            }

            .header-info {
                flex-wrap: nowrap;
            }
        }

        @media (max-width: 576px) {
            :root {
                --sidebar-width: 260px;
                --header-height: 55px;
            }

            .container {
                padding: 8px;
                gap: 8px;
            }
            
            .logo {
                font-size: 1.3rem;
            }
            
            .header-info {
                font-size: 0.8rem;
            }
            
            .section-header {
                padding: 10px;
            }
            
            .soap-tabs {
                overflow-x: auto;
                white-space: nowrap;
            }
            
            .soap-tab {
                padding: 8px 12px;
                font-size: 0.85rem;
            }
            
            .editor-content {
                padding: 10px;
            }
            
            .editor-header {
                gap: 8px;
            }
            
            .quick-actions {
                gap: 6px;
            }
            
            .quick-action {
                padding: 5px 8px;
                font-size: 0.8rem;
            }
            
            .patient-header {
                padding: 10px 15px;
            }
            
            .modal-content {
                width: 95%;
                padding: 15px;
            }
            
            .modal-title {
                font-size: 1.3rem;
            }
            
            .form-group {
                margin-bottom: 12px;
            }
            
            .soap-textarea {
                padding: 10px;
                font-size: 0.95rem;
            }

            .message-input-container {
                padding: 8px;
            }
            
            .message-input {
                padding: 8px 10px;
            }
            
            .pass-plantao-sidebar .btn {
                padding: 15px 10px;
                font-size: 1rem;
            }
        }
    </style>
</head>
<body>
    <!-- Toast Container -->
    <div class="toast" id="toast">
        <span id="toast-message">Opera√ß√£o realizada com sucesso!</span>
    </div>

    <!-- Header -->
    <header>
        <button class="mobile-menu-btn" id="mobileMenuBtn">
            <span></span>
        </button>
        <div class="logo">
            DONTMED
        </div>
        <div class="header-info">
            <!-- Bot√£o passar plant√£o no header (desktop) -->
            <button class="btn btn-pass btn-pass-header" id="btnPassPlantaoHeader">
                Passar Plant√£o
            </button>
            <div class="user-info">
                <span>Dr. Carlos Silva</span>
            </div>
            <div class="time-info">
                <span id="currentTime">00:00</span>
            </div>
        </div>
    </header>

    <div class="container">
        <!-- Sidebar -->
        <div class="sidebar card" id="sidebar">
            <div class="section-header">
                <div class="section-title">Setores</div>
                <button class="btn" id="btnNewSetor">
                    Novo
                </button>
            </div>
            
            <div class="search-container">
                <div class="search-box">
                    <input type="text" id="searchInput" placeholder="Buscar paciente ou setor...">
                    <div class="autocomplete-container" id="autocompleteContainer">
                        <!-- Resultados do autocomplete ser√£o exibidos aqui -->
                    </div>
                </div>
            </div>
            
            <div class="scrollable-content" id="setoresList">
                <!-- Setores ser√£o carregados aqui dinamicamente -->
            </div>
            
            <!-- Bot√£o "Passar Plant√£o" dentro da sidebar (mobile) -->
            <div class="pass-plantao-sidebar" id="passPlantaoSidebar">
                <button class="btn btn-pass" id="btnPassPlantaoSidebar">
                    Passar Plant√£o
                </button>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content card">
            <div class="patient-header" id="patientHeader">
                <div class="patient-title-container">
                    <div class="patient-title-wrapper">
                        <div class="patient-title" id="patientTitle">
                            <span>Selecione um paciente</span>
                        </div>
                    </div>
                    <button class="btn btn-success" id="btnAlta">Alta</button>
                </div>
                <div class="patient-details" id="patientDetails" style="display: none;">
                    <!-- Detalhes do paciente ser√£o carregados aqui -->
                </div>
            </div>
            
            <!-- Estado inicial: nenhum paciente selecionado -->
            <div class="empty-state" id="emptyState">
                <div class="empty-content">
                    <div class="empty-icon">üè•</div>
                    <h3>Nenhum setor criado</h3>
                    <p>Crie seu primeiro setor para come√ßar a organizar os pacientes</p>
                    <div class="empty-actions">
                        <button class="btn" id="btnQuickSetor">
                            <span>+</span> Criar Setor
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="editor-container" id="editorContainer">
                <!-- Chat de mensagens -->
                <div class="editor-content active" id="chat">
                    <div class="editor-header">
                        <div class="editor-title">Anota√ß√µes Cl√≠nicas</div>
                        <div class="quick-actions">
                            <div class="quick-action" data-text="PA: 120/80 mmHg | FC: 78 bpm | FR: 16 rpm | Temp: 36.5¬∞C">
                                Sinais Vitais
                            </div>
                            <div class="quick-action" data-text="Exame f√≠sico: abd√¥men fl√°cido, indolor √† palpa√ß√£o">
                                Exame F√≠sico
                            </div>
                            <div class="quick-action" data-text="Exames laboratoriais dentro dos par√¢metros normais">
                                Exames
                            </div>
                            <div class="quick-action" data-text="Paciente relata melhora do quadro">
                                Melhora
                            </div>
                            <div class="quick-action" data-text="Paciente refere dor intensa">
                                Dor
                            </div>
                            <div class="quick-action" data-text="Paciente consciente, orientado, em bom estado geral">
                                Estado Geral
                            </div>
                            <div class="quick-action" data-text="Queixa principal: dor abdominal difusa h√° 2 dias">
                                Queixas
                            </div>
                            <div class="quick-action" data-text="Conduta: manter hidrata√ß√£o venosa, analgesia e reavalia√ß√£o em 6h">
                                Conduta
                            </div>
                            <div class="quick-action" data-text="Prescri√ß√£o: dipirona 1g IV 6/6h, omeprazol 40mg VO 1x/dia">
                                Prescri√ß√£o
                            </div>
                            <div class="quick-action" data-text="Paciente evolui est√°vel, sem intercorr√™ncias">
                                Evolu√ß√£o Est√°vel
                            </div>
                            <div class="quick-action" data-text="Encaminhado para realiza√ß√£o de exames laboratoriais e imagem">
                                Encaminhamento
                            </div>
                            <div class="quick-action" data-text="Informado √† equipe de enfermagem para monitoriza√ß√£o cont√≠nua dos sinais vitais">
                                Enfermagem
                            </div>
                        </div>
                    </div>
                    <div class="chat-history" id="chatHistory">
                        <!-- Mensagens ser√£o carregadas aqui -->
                    </div>
                    <div class="message-input-container">
                        <textarea class="message-input" id="messageInput" placeholder="Escreva uma nova anota√ß√£o cl√≠nica..." rows="1"></textarea>
                        <button class="btn-send" id="btnSendMessage" disabled>‚û§</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Passar Plant√£o -->
    <div class="modal" id="passPlantaoModal">
        <div class="modal-content card">
            <div class="modal-header">
                <h2 class="modal-title">Passagem de Plant√£o</h2>
            </div>
            
            <div>
                <div class="form-group">
                    <label>M√©dico Atual</label>
                    <input type="text" class="form-control" value="Dr. Carlos Silva" readonly>
                </div>
                
                <div class="form-group">
                    <label>M√©dico que Receber√°</label>
                    <select class="form-control" id="medicoRecebe">
                        <option value="">Selecione o m√©dico</option>
                        <option value="Dra. Ana Santos">Dra. Ana Santos</option>
                        <option value="Dr. Pedro Oliveira">Dr. Pedro Oliveira</option>
                        <option value="Dra. Juliana Costa">Dra. Juliana Costa</option>
                    </select>
                    <div class="error-message" id="medicoRecebeError">Selecione um m√©dico</div>
                </div>
                
                <h3 style="margin: 20px 0 15px; font-size: 1.1rem; font-weight: 600; border-top: 1px solid var(--border); padding-top: 15px;">
                    Checklist de Passagem
                </h3>
                
                <div style="display: flex; flex-direction: column; gap: 12px; margin-bottom: 25px;">
                    <label style="display: flex; align-items: center; gap: 12px;">
                        <input type="checkbox" style="width: 20px; height: 20px; accent-color: var(--darker);" id="checkVisitados">
                        <span>Todos os pacientes foram visitados</span>
                    </label>
                    <label style="display: flex; align-items: center; gap: 12px;">
                        <input type="checkbox" style="width: 20px; height: 20px; accent-color: var(--darker);" id="checkRepassado">
                        <span>Plant√£o repassado para o m√©dico seguinte</span>
                    </label>
                    <label style="display: flex; align-items: center; gap: 12px;">
                        <input type="checkbox" style="width: 20px; height: 20px; accent-color: var(--darker);" id="checkPrescricoes">
                        <span>Todas as prescri√ß√µes foram atualizadas</span>
                    </label>
                    <label style="display: flex; align-items: center; gap: 12px;">
                        <input type="checkbox" style="width: 20px; height: 20px; accent-color: var(--darker);" id="checkDocumentacao">
                        <span>Documenta√ß√£o completa de todos os atendimentos</span>
                    </label>
                </div>
                
                <div class="form-group">
                    <label>Assinatura Digital</label>
                    <input type="text" class="form-control" id="assinatura" 
                           placeholder="Digite seu nome completo para assinar" readonly>
                </div>
            </div>
            
            <div class="modal-footer">
                <button class="btn" id="btnCancelPass" style="background: rgba(0,0,0,0.08); color: var(--dark);">
                    Cancelar
                </button>
                <button class="btn btn-success" id="btnConfirmPass">
                    Confirmar Passagem
                </button>
            </div>
        </div>
    </div>

    <!-- Modal Novo Setor -->
    <div class="modal" id="newSetorModal">
        <div class="modal-content card">
            <div class="modal-header">
                <h2 class="modal-title">Adicionar Novo Setor</h2>
            </div>
            
            <div class="progress-container">
                <div class="progress-header">
                    <span>Setores: <span id="currentSetorCount">0</span>/<span id="maxSetor">5</span></span>
                    <span id="maxSetorMessage" style="color: var(--danger); display: none;">M√°ximo atingido</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
            </div>
            
            <div class="form-group">
                <label>Nome do Setor <span style="color: var(--danger);">*</span></label>
                <input type="text" class="form-control" id="setorName" placeholder="Ex: UTI Adulto, Emerg√™ncia">
                <div class="error-message" id="setorNameError">Informe o nome do setor</div>
            </div>
            
            <!-- Turnos personalizados -->
            <h3 style="margin: 15px 0 10px; font-size: 1rem; font-weight: 600; color: var(--darker);">Turnos</h3>
            <div id="turnosContainer">
                <!-- Turnos ser√£o adicionados dinamicamente aqui -->
            </div>
            <button class="btn" id="btnAddTurno" style="margin-top: 10px; width: 100%;">+ Adicionar Turno</button>
            <div class="error-message" id="turnosError">Adicione pelo menos um turno</div>
            
            <div class="modal-footer">
                <button class="btn" id="btnCancelSetor" style="background: rgba(0,0,0,0.08); color: var(--dark);">
                    Cancelar
                </button>
                <button class="btn btn-success" id="btnSaveSetor">
                    Salvar Setor
                </button>
            </div>
        </div>
    </div>

    <!-- Modal Novo Paciente -->
    <div class="modal" id="newPacienteModal">
        <div class="modal-content card">
            <div class="modal-header">
                <h2 class="modal-title">Adicionar Novo Paciente</h2>
            </div>
            
            <div class="form-group">
                <label>Nome Completo <span style="color: var(--danger);">*</span></label>
                <input type="text" class="form-control" id="pacienteName" placeholder="Nome do paciente">
                <div class="error-message" id="pacienteNameError">Informe o nome do paciente</div>
            </div>
            
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 20px;">
                <div class="form-group">
                    <label>Idade <span style="color: var(--danger);">*</span></label>
                    <input type="number" class="form-control" id="pacienteIdade" placeholder="Idade" min="0" max="120">
                    <div class="error-message" id="pacienteIdadeError">Informe uma idade v√°lida</div>
                </div>
                
                <div class="form-group">
                    <label>Sexo Biol√≥gico <span style="color: var(--danger);">*</span></label>
                    <select class="form-control" id="pacienteSexo">
                        <option value="">Selecione</option>
                        <option value="M">Masculino</option>
                        <option value="F">Feminino</option>
                    </select>
                    <div class="error-message" id="pacienteSexoError">Selecione o sexo biol√≥gico</div>
                </div>
            </div>
            
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 20px;">
                <div class="form-group">
                    <label>Leito <span style="color: var(--danger);">*</span></label>
                    <input type="text" class="form-control" id="pacienteLeito" placeholder="N√∫mero do leito">
                    <div class="error-message" id="pacienteLeitoError">Informe o n√∫mero do leito</div>
                </div>
                
                <div class="form-group">
                    <label>N¬∫ Atendimento <span style="color: var(--danger);">*</span></label>
                    <input type="text" class="form-control" id="pacienteAtendimento" placeholder="N√∫mero do atendimento">
                    <div class="error-message" id="pacienteAtendimentoError">Informe o n√∫mero do atendimento</div>
                </div>
            </div>
            
            <div class="modal-footer">
                <button class="btn" id="btnCancelPaciente" style="background: rgba(0,0,0,0.08); color: var(--dark);">
                    Cancelar
                </button>
                <button class="btn btn-success" id="btnSavePaciente">
                    Adicionar Paciente
                </button>
            </div>
        </div>
    </div>

    <!-- Modal Alta -->
    <div class="modal" id="altaModal">
        <div class="modal-content card">
            <div class="modal-header">
                <h2 class="modal-title">Registrar Alta</h2>
            </div>
            
            <div class="form-group">
                <label>Tipo de Alta <span style="color: var(--danger);">*</span></label>
                <select class="form-control" id="tipoAlta">
                    <option value="">Selecione o tipo de alta</option>
                    <option value="melhora">Alta por melhora cl√≠nica</option>
                    <option value="pedido">Alta a pedido</option>
                    <option value="domiciliar">Alta com encaminhamento para cuidados domiciliares</option>
                    <option value="retorno">Alta com retorno programado</option>
                    <option value="obito">Alta por √≥bito</option>
                    <option value="transferencia">Alta por transfer√™ncia</option>
                    <option value="administrativa">Alta administrativa</option>
                    <option value="contra_indicacao">Alta contra indica√ß√£o m√©dica</option>
                </select>
                <div class="error-message" id="tipoAltaError">Selecione o tipo de alta</div>
            </div>
            
            <div class="form-group">
                <label>Data e Hora <span style="color: var(--danger);">*</span></label>
                <input type="datetime-local" class="form-control" id="dataAlta">
                <div class="error-message" id="dataAltaError">Informe a data e hora da alta</div>
            </div>
            
            <div class="form-group">
                <label>Observa√ß√µes</label>
                <textarea class="form-control" id="obsAlta" rows="3" placeholder="Detalhes da alta"></textarea>
            </div>
            
            <div class="modal-footer">
                <button class="btn" id="btnCancelAlta" style="background: rgba(0,0,0,0.08); color: var(--dark);">
                    Cancelar
                </button>
                <button class="btn btn-success" id="btnConfirmAlta">
                    Confirmar Alta
                </button>
            </div>
        </div>
    </div>

    <script>
        // Dados de exemplo para demonstra√ß√£o
        const dados = {
            setores: [
                {
                    id: 1,
                    nome: "UTI Adulto",
                    turnos: [
                        { nome: "Manh√£", inicio: "07:00", fim: "12:00" },
                        { nome: "Tarde", inicio: "13:00", fim: "18:00" },
                        { nome: "Noite", inicio: "19:00", fim: "23:00" }
                    ],
                    pacientes: [
                        {
                            id: 101,
                            nome: "Maria Oliveira",
                            idade: 68,
                            sexo: "F",
                            leito: "12A",
                            atendimento: "2023001",
                            anotacoes: [
                                {
                                    id: 1001,
                                    texto: "Paciente relata dor tor√°cica intensa e falta de ar.",
                                    timestamp: "2023-06-25T10:15:00",
                                    medico: "Dr. Carlos Silva",
                                    tipo: "texto"
                                },
                                {
                                    id: 1002,
                                    texto: "PA: 150/90 mmHg | FC: 110 bpm | FR: 24 rpm | Temp: 37.2¬∞C",
                                    timestamp: "2023-06-25T10:20:00",
                                    medico: "Dr. Carlos Silva",
                                    tipo: "texto"
                                }
                            ],
                            alta: null
                        },
                        {
                            id: 102,
                            nome: "Carlos Santos",
                            idade: 55,
                            sexo: "M",
                            leito: "15B",
                            atendimento: "2023002",
                            anotacoes: [
                                {
                                    id: 1003,
                                    texto: "Paciente refere tosse produtiva e febre h√° 3 dias.",
                                    timestamp: "2023-06-25T10:30:00",
                                    medico: "Dr. Carlos Silva",
                                    tipo: "texto"
                                }
                            ],
                            alta: null
                        }
                    ]
                },
                {
                    id: 2,
                    nome: "Emerg√™ncia",
                    turnos: [
                        { nome: "Manh√£", inicio: "07:00", fim: "12:00" },
                        { nome: "Tarde", inicio: "13:00", fim: "18:00" },
                        { nome: "Noite", inicio: "19:00", fim: "23:00" }
                    ],
                    pacientes: [
                        {
                            id: 201,
                            nome: "Jo√£o Pereira",
                            idade: 42,
                            sexo: "M",
                            leito: "5",
                            atendimento: "2023003",
                            anotacoes: [],
                            alta: null
                        }
                    ]
                }
            ],
            historico: []
        };

        // Elementos DOM
        const DOM = {
            sidebar: document.getElementById('sidebar'),
            mobileMenuBtn: document.getElementById('mobileMenuBtn'),
            setoresList: document.getElementById('setoresList'),
            btnNewSetor: document.getElementById('btnNewSetor'),
            patientTitle: document.getElementById('patientTitle'),
            patientDetails: document.getElementById('patientDetails'),
            patientToggleIcon: document.getElementById('patientToggleIcon'),
            searchInput: document.getElementById('searchInput'),
            autocompleteContainer: document.getElementById('autocompleteContainer'),
            soapTabs: document.querySelectorAll('.soap-tab'),
            editorContents: document.querySelectorAll('.editor-content'),
            btnPassPlantaoSidebar: document.getElementById('btnPassPlantaoSidebar'),
            btnPassPlantaoHeader: document.getElementById('btnPassPlantaoHeader'),
            passPlantaoModal: document.getElementById('passPlantaoModal'),
            btnCancelPass: document.getElementById('btnCancelPass'),
            btnConfirmPass: document.getElementById('btnConfirmPass'),
            medicoRecebe: document.getElementById('medicoRecebe'),
            medicoRecebeError: document.getElementById('medicoRecebeError'),
            assinatura: document.getElementById('assinatura'),
            toast: document.getElementById('toast'),
            toastMessage: document.getElementById('toast-message'),
            newSetorModal: document.getElementById('newSetorModal'),
            setorName: document.getElementById('setorName'),
            setorNameError: document.getElementById('setorNameError'),
            btnCancelSetor: document.getElementById('btnCancelSetor'),
            btnSaveSetor: document.getElementById('btnSaveSetor'),
            newPacienteModal: document.getElementById('newPacienteModal'),
            pacienteName: document.getElementById('pacienteName'),
            pacienteNameError: document.getElementById('pacienteNameError'),
            pacienteIdade: document.getElementById('pacienteIdade'),
            pacienteIdadeError: document.getElementById('pacienteIdadeError'),
            pacienteSexo: document.getElementById('pacienteSexo'),
            pacienteSexoError: document.getElementById('pacienteSexoError'),
            pacienteLeito: document.getElementById('pacienteLeito'),
            pacienteLeitoError: document.getElementById('pacienteLeitoError'),
            pacienteAtendimento: document.getElementById('pacienteAtendimento'),
            pacienteAtendimentoError: document.getElementById('pacienteAtendimentoError'),
            btnCancelPaciente: document.getElementById('btnCancelPaciente'),
            btnSavePaciente: document.getElementById('btnSavePaciente'),
            btnAlta: document.getElementById('btnAlta'),
            altaModal: document.getElementById('altaModal'),
            tipoAlta: document.getElementById('tipoAlta'),
            tipoAltaError: document.getElementById('tipoAltaError'),
            dataAlta: document.getElementById('dataAlta'),
            dataAltaError: document.getElementById('dataAltaError'),
            obsAlta: document.getElementById('obsAlta'),
            btnCancelAlta: document.getElementById('btnCancelAlta'),
            btnConfirmAlta: document.getElementById('btnConfirmAlta'),
            chatHistory: document.getElementById('chatHistory'),
            messageInput: document.getElementById('messageInput'),
            btnSendMessage: document.getElementById('btnSendMessage'),
            currentSetorCount: document.getElementById('currentSetorCount'),
            progressFill: document.getElementById('progressFill'),
            maxSetorMessage: document.getElementById('maxSetorMessage'),
            maxSetor: document.getElementById('maxSetor'),
            emptyState: document.getElementById('emptyState'),
            patientHeader: document.getElementById('patientHeader'),
            editorContainer: document.getElementById('editorContainer'),
            btnQuickSetor: document.getElementById('btnQuickSetor'),
            btnAddTurno: document.getElementById('btnAddTurno'),
            turnosContainer: document.getElementById('turnosContainer'),
            turnosError: document.getElementById('turnosError')
        };

        // Estado da aplica√ß√£o
        let state = {
            currentSetor: null,
            currentPaciente: null,
            currentDoctor: "Dr. Carlos Silva",
            lastEdit: new Date().toISOString(),
            turnoCount: 0
        };

        // Fun√ß√£o para destacar termos de busca
        function highlightText(text, searchTerm) {
            if (!searchTerm) return text;
            
            const regex = new RegExp(`(${searchTerm})`, 'gi');
            return text.replace(regex, '<span class="highlight">$1</span>');
        }

        // Fun√ß√£o para pesquisar pacientes e setores
        function searchContent(searchTerm) {
            const results = {
                setores: [],
                pacientes: []
            };
            
            if (!searchTerm) {
                return results;
            }
            
            const term = searchTerm.toLowerCase();
            
            // Procurar em setores
            dados.setores.forEach(setor => {
                if (setor.nome.toLowerCase().includes(term)) {
                    results.setores.push({
                        id: setor.id,
                        nome: setor.nome,
                        type: 'setor'
                    });
                }
                
                // Procurar em pacientes
                setor.pacientes.forEach(paciente => {
                    if (paciente.nome.toLowerCase().includes(term)) {
                        results.pacientes.push({
                            id: paciente.id,
                            nome: paciente.nome,
                            setorId: setor.id,
                            setorNome: setor.nome,
                            type: 'paciente'
                        });
                    }
                });
            });
            
            return results;
        }

        // Renderizar resultados do autocomplete
        function renderAutocomplete(results, searchTerm) {
            DOM.autocompleteContainer.innerHTML = '';
            
            if (results.pacientes.length === 0 && results.setores.length === 0) {
                DOM.autocompleteContainer.classList.remove('visible');
                return;
            }
            
            // Adicionar pacientes
            if (results.pacientes.length > 0) {
                results.pacientes.forEach(paciente => {
                    const item = document.createElement('div');
                    item.className = 'autocomplete-item';
                    item.innerHTML = `
                        <div class="autocomplete-icon">üë§</div>
                        <div>
                            <div>${highlightText(paciente.nome, searchTerm)}</div>
                            <div style="font-size: 0.8rem; color: var(--gray);">${paciente.setorNome}</div>
                        </div>
                    `;
                    
                    item.addEventListener('click', () => {
                        DOM.searchInput.value = '';
                        DOM.autocompleteContainer.classList.remove('visible');
                        selectPaciente(paciente.id);
                    });
                    
                    DOM.autocompleteContainer.appendChild(item);
                });
            }
            
            // Adicionar setores
            if (results.setores.length > 0) {
                results.setores.forEach(setor => {
                    const item = document.createElement('div');
                    item.className = 'autocomplete-item';
                    item.innerHTML = `
                        <div class="autocomplete-icon">üè•</div>
                        <div>${highlightText(setor.nome, searchTerm)}</div>
                    `;
                    
                    item.addEventListener('click', () => {
                        DOM.searchInput.value = '';
                        DOM.autocompleteContainer.classList.remove('visible');
                        state.currentSetor = setor.id;
                        renderSetores();
                    });
                    
                    DOM.autocompleteContainer.appendChild(item);
                });
            }
            
            DOM.autocompleteContainer.classList.add('visible');
        }

        // Inicializa√ß√£o
        function init() {
            renderSetores();
            setupEventListeners();
            updateTime();
            setInterval(updateTime, 60000);
            updateSetorProgress();
            
            // Garantir que o bot√£o do header esteja oculto em mobile inicialmente
            if (window.innerWidth <= 992) {
                DOM.btnPassPlantaoHeader.classList.add('hidden');
            }
            
            // Mostrar estado inicial
            updateEmptyState();
            
            // Inicializar turnos
            addTurno();
        }
        
        // Atualizar barra de progresso de setores
        function updateSetorProgress() {
            const count = dados.setores.length;
            const max = 5;
            const percentage = (count / max) * 100;
            
            DOM.currentSetorCount.textContent = count;
            DOM.maxSetor.textContent = max;
            
            DOM.progressFill.style.width = `${percentage}%`;
            
            if (count >= max) {
                DOM.maxSetorMessage.style.display = 'inline';
                DOM.btnNewSetor.disabled = true;
                DOM.btnNewSetor.classList.add('disabled');
            } else {
                DOM.maxSetorMessage.style.display = 'none';
                DOM.btnNewSetor.disabled = false;
                DOM.btnNewSetor.classList.remove('disabled');
            }
        }

        // Renderizar setores e pacientes
        function renderSetores() {
            DOM.setoresList.innerHTML = '';
            
            // Se n√£o houver setores, mostrar mensagem
            if (dados.setores.length === 0) {
                DOM.setoresList.innerHTML = `
                    <div style="padding: 20px; text-align: center; color: var(--gray);">
                        <p>Nenhum setor criado</p>
                        <button class="btn" style="margin-top: 15px;" id="btnFirstSetor">
                            Criar Primeiro Setor
                        </button>
                    </div>
                `;
                
                document.getElementById('btnFirstSetor').addEventListener('click', openNewSetorModal);
                return;
            }
            
            dados.setores.forEach(setor => {
                const isExpanded = state.currentSetor === setor.id;
                
                const setorEl = document.createElement('div');
                setorEl.className = `setor-item ${isExpanded ? 'expanded' : ''} ${state.currentSetor === setor.id ? 'active' : ''}`;
                setorEl.innerHTML = `
                    <div class="setor-name">
                        <span>${setor.nome}</span>
                        <span>${setor.pacientes.length}</span>
                    </div>
                    <div class="pacientes-container">
                        ${setor.pacientes.map(paciente => `
                            <div class="paciente-item ${state.currentPaciente === paciente.id ? 'active' : ''}" data-id="${paciente.id}">
                                <div class="paciente-info">
                                    <div class="paciente-name">${paciente.nome} ${paciente.alta ? `<span class="alta-badge">Alta</span>` : ''}</div>
                                    <div class="paciente-details">
                                        <span>${paciente.idade} anos</span>
                                        <span class="badge">${paciente.leito}</span>
                                        <span class="badge">${paciente.atendimento}</span>
                                        ${paciente.alta ? `<span class="alta-item">${formatAltaType(paciente.alta.tipo)}</span>` : ''}
                                    </div>
                                </div>
                            </div>
                        `).join('')}
                        <button class="btn" style="margin-top: 10px; width: 100%;" data-setor="${setor.id}">
                            Adicionar Paciente
                        </button>
                    </div>
                `;
                
                setorEl.addEventListener('click', (e) => {
                    if (!e.target.closest('.paciente-item') && !e.target.closest('button')) {
                        if (state.currentSetor === setor.id) {
                            state.currentSetor = null;
                        } else {
                            state.currentSetor = setor.id;
                        }
                        renderSetores();
                    }
                });
                
                DOM.setoresList.appendChild(setorEl);
                
                // Eventos para pacientes
                setorEl.querySelectorAll('.paciente-item').forEach(item => {
                    item.addEventListener('click', () => {
                        const pacienteId = parseInt(item.getAttribute('data-id'));
                        selectPaciente(pacienteId);
                    });
                });
                
                // Evento para bot√£o de adicionar paciente
                setorEl.querySelector('button').addEventListener('click', (e) => {
                    e.stopPropagation();
                    openNewPacienteModal(setor.id);
                });
            });
        }

        // Formatar tipo de alta
        function formatAltaType(tipo) {
            const tipos = {
                'melhora': 'Alta por melhora',
                'pedido': 'Alta a pedido',
                'domiciliar': 'Alta domiciliar',
                'retorno': 'Alta com retorno',
                'obito': '√ìbito',
                'transferencia': 'Transfer√™ncia',
                'administrativa': 'Alta administrativa',
                'contra_indicacao': 'Alta contra indica√ß√£o'
            };
            return tipos[tipo] || tipo;
        }

        // Selecionar paciente
        function selectPaciente(pacienteId) {
            let paciente = null;
            let setor = null;
            
            // Encontrar paciente e setor
            for (const s of dados.setores) {
                paciente = s.pacientes.find(p => p.id === pacienteId);
                if (paciente) {
                    setor = s;
                    break;
                }
            }
            
            if (!paciente) return;
            
            state.currentSetor = setor.id;
            state.currentPaciente = paciente.id;
            
            // Atualizar header do paciente
            DOM.patientTitle.innerHTML = `
                <span>${paciente.nome}</span>
                ${window.innerWidth <= 992 ? '<div class="patient-toggle-icon" id="patientToggleIcon">‚ñº</div>' : ''}
            `;
            DOM.patientDetails.innerHTML = `
                <div class="detail-item">${paciente.idade} anos, ${paciente.sexo === 'M' ? 'Masculino' : 'Feminino'}</div>
                <div class="detail-item">Leito: ${paciente.leito}</div>
                <div class="detail-item">Atendimento: ${paciente.atendimento}</div>
            `;
            
            // Mostrar/ocultar bot√£o de alta
            if (paciente.alta) {
                DOM.btnAlta.classList.remove('btn-alta-visible');
            } else {
                DOM.btnAlta.classList.add('btn-alta-visible');
            }
            
            // Mostrar toggle de detalhes
            DOM.patientDetails.style.display = 'none';
            
            // Carregar hist√≥rico de mensagens
            renderChatHistory(paciente);
            
            // Atualizar sidebar
            renderSetores();
            
            // Atualizar estado vazio
            updateEmptyState();
            
            // Fechar menu no mobile
            if (window.innerWidth <= 992) {
                DOM.sidebar.classList.remove('open');
                DOM.mobileMenuBtn.classList.remove('open');
            }
        }
        
        // Atualizar estado vazio
        function updateEmptyState() {
            // Se n√£o houver setores, mostrar estado vazio
            if (dados.setores.length === 0) {
                DOM.emptyState.style.display = 'flex';
                DOM.patientHeader.style.display = 'none';
                DOM.editorContainer.style.display = 'none';
            } 
            // Se houver setores mas nenhum paciente selecionado
            else if (!state.currentPaciente) {
                DOM.emptyState.style.display = 'none';
                DOM.patientHeader.style.display = 'flex';
                DOM.editorContainer.style.display = 'none';
                DOM.patientTitle.innerHTML = '<span>Selecione um paciente</span>';
                DOM.patientDetails.style.display = 'none';
            } 
            // Se houver paciente selecionado
            else {
                DOM.emptyState.style.display = 'none';
                DOM.patientHeader.style.display = 'flex';
                DOM.editorContainer.style.display = 'flex';
            }
        }

        // Renderizar hist√≥rico de mensagens
        function renderChatHistory(paciente) {
            DOM.chatHistory.innerHTML = '';
            
            if (!paciente.anotacoes || paciente.anotacoes.length === 0) {
                DOM.chatHistory.innerHTML = '<div class="message message-system">Nenhuma anota√ß√£o registrada</div>';
                return;
            }
            
            // Ordenar mensagens por data
            paciente.anotacoes.sort((a, b) => new Date(a.timestamp) - new Date(b.timestamp));
            
            paciente.anotacoes.forEach(msg => {
                const messageEl = document.createElement('div');
                const date = new Date(msg.timestamp);
                const timeString = date.toLocaleTimeString('pt-BR', {hour: '2-digit', minute:'2-digit'});
                
                messageEl.className = `message ${msg.medico ? 'message-doctor' : 'message-system'}`;
                
                // Formatar a data para DD/MM/AAAA HH:MM
                const dateStr = date.toLocaleDateString('pt-BR');
                const timeStr = date.toLocaleTimeString('pt-BR', {hour: '2-digit', minute:'2-digit'});
                
                messageEl.innerHTML = `
                    <div>${msg.texto}</div>
                    ${msg.medico ? 
                        `<div class="message-signature">${msg.medico} - ${dateStr} ${timeStr}</div>` : 
                        `<div class="message-timestamp">${timeString}</div>`
                    }
                `;
                
                DOM.chatHistory.appendChild(messageEl);
            });
            
            // Rolagem autom√°tica para o final
            DOM.chatHistory.scrollTop = DOM.chatHistory.scrollHeight;
        }

        // Configurar event listeners
        function setupEventListeners() {
            // Menu mobile
            DOM.mobileMenuBtn.addEventListener('click', () => {
                DOM.sidebar.classList.toggle('open');
                DOM.mobileMenuBtn.classList.toggle('open');
            });
            
            // Novo setor
            DOM.btnNewSetor.addEventListener('click', openNewSetorModal);
            
            // Autocomplete
            DOM.searchInput.addEventListener('input', function() {
                const searchTerm = this.value.trim();
                if (searchTerm.length > 1) {
                    const results = searchContent(searchTerm.toLowerCase());
                    renderAutocomplete(results, searchTerm);
                } else {
                    DOM.autocompleteContainer.classList.remove('visible');
                    renderSetores();
                }
            });
            
            // Fechar autocomplete ao clicar fora
            document.addEventListener('click', (e) => {
                if (!DOM.searchInput.contains(e.target) && !DOM.autocompleteContainer.contains(e.target)) {
                    DOM.autocompleteContainer.classList.remove('visible');
                }
            });
            
            // Quick actions
            document.querySelectorAll('.quick-action').forEach(action => {
                action.addEventListener('click', function() {
                    const textToAdd = this.getAttribute('data-text');
                    if(textToAdd) {
                        DOM.messageInput.value = textToAdd;
                        DOM.messageInput.focus();
                        DOM.btnSendMessage.disabled = false;
                    }
                });
            });
            
            // Passar plant√£o
            DOM.btnPassPlantaoSidebar.addEventListener('click', openPassPlantaoModal);
            DOM.btnPassPlantaoHeader.addEventListener('click', openPassPlantaoModal);
            
            DOM.btnCancelPass.addEventListener('click', () => {
                DOM.passPlantaoModal.classList.remove('active');
            });
            
            DOM.btnConfirmPass.addEventListener('click', () => {
                const medicoRecebe = DOM.medicoRecebe.value.trim();
                if (!medicoRecebe) {
                    showError(DOM.medicoRecebeError, 'Selecione o m√©dico que receber√° o plant√£o');
                    return;
                }
                
                // Mostrar feedback visual
                DOM.btnConfirmPass.innerHTML = '<span class="loader"></span> Processando...';
                DOM.btnConfirmPass.disabled = true;
                
                setTimeout(() => {
                    showToast(`Plant√£o passado para ${medicoRecebe} com sucesso!`, 'success');
                    DOM.passPlantaoModal.classList.remove('active');
                    DOM.btnConfirmPass.innerHTML = 'Confirmar Passagem';
                    DOM.btnConfirmPass.disabled = false;
                    DOM.medicoRecebe.value = '';
                }, 1500);
            });
            
            // Modal novo setor
            DOM.btnCancelSetor.addEventListener('click', () => {
                DOM.newSetorModal.classList.remove('active');
            });
            
            DOM.btnSaveSetor.addEventListener('click', () => {
                // Resetar erros
                hideAllErrors();
                
                const nomeSetor = DOM.setorName.value.trim();
                if (!nomeSetor) {
                    showError(DOM.setorNameError, 'Informe o nome do setor');
                    DOM.setorName.focus();
                    return;
                }
                
                // Validar turnos
                const turnos = [];
                const turnoElements = document.querySelectorAll('.turno-section');
                let hasTurnoError = false;
                
                if (turnoElements.length === 0) {
                    showError(DOM.turnosError, 'Adicione pelo menos um turno');
                    return;
                }
                
                // Coletar e validar turnos
                for (let i = 0; i < turnoElements.length; i++) {
                    const turnoEl = turnoElements[i];
                    const nomeTurno = turnoEl.querySelector('.turno-name').value.trim();
                    const inicio = turnoEl.querySelector('.turno-inicio').value;
                    const fim = turnoEl.querySelector('.turno-fim').value;
                    
                    if (!nomeTurno) {
                        showError(turnoEl.querySelector('.turno-name-error'), 'Informe o nome do turno');
                        hasTurnoError = true;
                    }
                    
                    if (!inicio) {
                        showError(turnoEl.querySelector('.turno-inicio-error'), 'Informe o hor√°rio de in√≠cio');
                        hasTurnoError = true;
                    }
                    
                    if (!fim) {
                        showError(turnoEl.querySelector('.turno-fim-error'), 'Informe o hor√°rio de t√©rmino');
                        hasTurnoError = true;
                    }
                    
                    if (inicio && fim && inicio >= fim) {
                        showError(turnoEl.querySelector('.turno-fim-error'), 'T√©rmino deve ser ap√≥s o in√≠cio');
                        hasTurnoError = true;
                    }
                    
                    if (!hasTurnoError) {
                        turnos.push({
                            nome: nomeTurno,
                            inicio: inicio,
                            fim: fim
                        });
                    }
                }
                
                if (hasTurnoError) return;
                
                // Verificar sobreposi√ß√£o de turnos
                if (hasSobreposicaoTurnos(turnos)) {
                    showToast('Existe sobreposi√ß√£o de hor√°rios entre turnos', 'error');
                    return;
                }
                
                const novoSetor = {
                    id: Date.now(),
                    nome: nomeSetor,
                    turnos: turnos,
                    pacientes: []
                };
                
                dados.setores.push(novoSetor);
                renderSetores();
                DOM.newSetorModal.classList.remove('active');
                DOM.setorName.value = '';
                updateSetorProgress();
                showToast(`Setor "${nomeSetor}" criado com sucesso!`, 'success');
            });
            
            // Bot√£o para adicionar turno
            DOM.btnAddTurno.addEventListener('click', addTurno);
            
            // Modal novo paciente
            DOM.btnCancelPaciente.addEventListener('click', () => {
                DOM.newPacienteModal.classList.remove('active');
            });
            
            DOM.btnSavePaciente.addEventListener('click', () => {
                // Resetar erros
                hideAllErrors();
                
                const nome = DOM.pacienteName.value.trim();
                const idade = parseInt(DOM.pacienteIdade.value);
                const sexo = DOM.pacienteSexo.value;
                const leito = DOM.pacienteLeito.value.trim();
                const atendimento = DOM.pacienteAtendimento.value.trim();
                
                if (!nome) {
                    showError(DOM.pacienteNameError, 'Informe o nome do paciente');
                    DOM.pacienteName.focus();
                    return;
                }
                
                if (isNaN(idade) || idade <= 0 || idade > 120) {
                    showError(DOM.pacienteIdadeError, 'Informe uma idade v√°lida');
                    DOM.pacienteIdade.focus();
                    return;
                }
                
                if (!sexo) {
                    showError(DOM.pacienteSexoError, 'Selecione o sexo biol√≥gico');
                    DOM.pacienteSexo.focus();
                    return;
                }
                
                if (!leito) {
                    showError(DOM.pacienteLeitoError, 'Informe o n√∫mero do leito');
                    DOM.pacienteLeito.focus();
                    return;
                }
                
                if (!atendimento) {
                    showError(DOM.pacienteAtendimentoError, 'Informe o n√∫mero do atendimento');
                    DOM.pacienteAtendimento.focus();
                    return;
                }
                
                // Encontrar setor
                const setorId = parseInt(DOM.newPacienteModal.getAttribute('data-setor'));
                const setor = dados.setores.find(s => s.id === setorId);
                
                if (setor) {
                    const novoPaciente = {
                        id: Date.now(),
                        nome,
                        idade,
                        sexo,
                        leito,
                        atendimento,
                        anotacoes: [{ 
                            id: Date.now(),
                            texto: `Paciente admitido em ${setor.nome}`,
                            timestamp: new Date().toISOString(),
                            medico: state.currentDoctor,
                            tipo: "system"
                        }],
                        alta: null
                    };
                    
                    setor.pacientes.push(novoPaciente);
                    renderSetores();
                    DOM.newPacienteModal.classList.remove('active');
                    
                    // Resetar campos
                    DOM.pacienteName.value = '';
                    DOM.pacienteIdade.value = '';
                    DOM.pacienteSexo.value = '';
                    DOM.pacienteLeito.value = '';
                    DOM.pacienteAtendimento.value = '';
                    
                    showToast(`Paciente "${nome}" adicionado com sucesso!`, 'success');
                    
                    // Se for o primeiro paciente, selecionar automaticamente
                    if (setor.pacientes.length === 1) {
                        selectPaciente(novoPaciente.id);
                    }
                }
            });
            
            // Bot√£o de alta
            DOM.btnAlta.addEventListener('click', openAltaModal);
            
            DOM.btnCancelAlta.addEventListener('click', () => {
                DOM.altaModal.classList.remove('active');
            });
            
            DOM.btnConfirmAlta.addEventListener('click', () => {
                // Resetar erros
                hideAllErrors();
                
                const tipo = DOM.tipoAlta.value;
                const data = DOM.dataAlta.value;
                
                if (!tipo) {
                    showError(DOM.tipoAltaError, 'Selecione o tipo de alta');
                    DOM.tipoAlta.focus();
                    return;
                }
                
                if (!data) {
                    showError(DOM.dataAltaError, 'Informe a data e hora da alta');
                    DOM.dataAlta.focus();
                    return;
                }
                
                const obs = DOM.obsAlta.value.trim();
                
                // Encontrar paciente
                for (const setor of dados.setores) {
                    const paciente = setor.pacientes.find(p => p.id === state.currentPaciente);
                    if (paciente) {
                        paciente.alta = {
                            tipo,
                            data,
                            obs,
                            timestamp: new Date().toISOString(),
                            medico: state.currentDoctor
                        };
                        
                        // Adicionar mensagem de alta no hist√≥rico
                        paciente.anotacoes.push({
                            id: Date.now(),
                            texto: `Alta registrada: ${formatAltaType(tipo)}`,
                            timestamp: new Date().toISOString(),
                            medico: state.currentDoctor,
                            tipo: "system"
                        });
                        
                        // Atualizar interface
                        DOM.btnAlta.classList.remove('btn-alta-visible');
                        renderSetores();
                        renderChatHistory(paciente);
                        
                        // Fechar modal
                        DOM.altaModal.classList.remove('active');
                        
                        // Resetar campos
                        DOM.tipoAlta.value = '';
                        DOM.obsAlta.value = '';
                        
                        // Mostrar toast
                        showToast('Alta registrada', 'success');
                        break;
                    }
                }
            });
            
            // Envio de mensagens
            DOM.btnSendMessage.addEventListener('click', sendMessage);
            
            DOM.messageInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    sendMessage();
                }
            });

            // Habilitar/desabilitar bot√£o de enviar
            DOM.messageInput.addEventListener('input', function() {
                DOM.btnSendMessage.disabled = this.value.trim() === '';
            });

            // Toggle de detalhes do paciente
            document.addEventListener('click', function(e) {
                const toggleIcon = document.getElementById('patientToggleIcon');
                if (toggleIcon && (e.target === toggleIcon || e.target.closest('#patientToggleIcon'))) {
                    const isVisible = DOM.patientDetails.style.display === 'block';
                    DOM.patientDetails.style.display = isVisible ? 'none' : 'block';
                    toggleIcon.textContent = isVisible ? '‚ñº' : '‚ñ≤';
                    toggleIcon.classList.toggle('open', !isVisible);
                }
            });
            
            // Listener para redimensionamento da tela
            window.addEventListener('resize', () => {
                if (window.innerWidth <= 992) {
                    DOM.btnPassPlantaoHeader.classList.add('hidden');
                } else {
                    DOM.btnPassPlantaoHeader.classList.remove('hidden');
                }
            });
            
            // Bot√µes de a√ß√£o r√°pida
            DOM.btnQuickSetor.addEventListener('click', openNewSetorModal);
        }

        // Adicionar novo turno
        function addTurno() {
            state.turnoCount++;
            const turnoId = state.turnoCount;
            
            const turnoEl = document.createElement('div');
            turnoEl.className = 'turno-section';
            turnoEl.innerHTML = `
                <button class="btn-remove-turno" data-id="${turnoId}">√ó</button>
                <div class="form-group">
                    <label>Nome do Turno <span style="color: var(--danger);">*</span></label>
                    <input type="text" class="form-control turno-name" placeholder="Ex: Manh√£, Tarde, Noite">
                    <div class="error-message turno-name-error"></div>
                </div>
                <div class="turno-grid">
                    <div class="form-group">
                        <label>In√≠cio <span style="color: var(--danger);">*</span></label>
                        <input type="time" class="form-control turno-inicio" value="07:00">
                        <div class="error-message turno-inicio-error"></div>
                    </div>
                    <div class="form-group">
                        <label>Fim <span style="color: var(--danger);">*</span></label>
                        <input type="time" class="form-control turno-fim" value="12:00">
                        <div class="error-message turno-fim-error"></div>
                    </div>
                </div>
            `;
            
            DOM.turnosContainer.appendChild(turnoEl);
            
            // Evento para remover turno
            turnoEl.querySelector('.btn-remove-turno').addEventListener('click', function() {
                if (document.querySelectorAll('.turno-section').length > 1) {
                    turnoEl.remove();
                    DOM.turnosError.style.display = 'none';
                } else {
                    showToast('Deve haver pelo menos um turno', 'error');
                }
            });
            
            // Esconder mensagem de erro de turnos
            DOM.turnosError.style.display = 'none';
        }
        
        // Verificar sobreposi√ß√£o de turnos
        function hasSobreposicaoTurnos(turnos) {
            for (let i = 0; i < turnos.length; i++) {
                for (let j = i + 1; j < turnos.length; j++) {
                    const turnoA = turnos[i];
                    const turnoB = turnos[j];
                    
                    // Converter para minutos para facilitar compara√ß√£o
                    const inicioA = timeToMinutes(turnoA.inicio);
                    const fimA = timeToMinutes(turnoA.fim);
                    const inicioB = timeToMinutes(turnoB.inicio);
                    const fimB = timeToMinutes(turnoB.fim);
                    
                    // Verificar sobreposi√ß√£o
                    if ((inicioA >= inicioB && inicioA < fimB) || 
                        (fimA > inicioB && fimA <= fimB) || 
                        (inicioB >= inicioA && inicioB < fimA)) {
                        return true;
                    }
                }
            }
            return false;
        }
        
        // Converter tempo para minutos
        function timeToMinutes(time) {
            const [hours, minutes] = time.split(':').map(Number);
            return hours * 60 + minutes;
        }
        
        // Mostrar erro
        function showError(element, message) {
            element.textContent = message;
            element.style.display = 'block';
        }
        
        // Ocultar todos os erros
        function hideAllErrors() {
            document.querySelectorAll('.error-message').forEach(el => {
                el.style.display = 'none';
            });
        }

        // Enviar mensagem
        function sendMessage() {
            if (!state.currentPaciente) {
                showToast('Selecione um paciente primeiro', 'error');
                return;
            }
            
            const message = DOM.messageInput.value.trim();
            if (!message) return;
            
            // Encontrar paciente
            for (const setor of dados.setores) {
                const paciente = setor.pacientes.find(p => p.id === state.currentPaciente);
                if (paciente) {
                    // Adicionar mensagem
                    paciente.anotacoes.push({
                        id: Date.now(),
                        texto: message,
                        timestamp: new Date().toISOString(),
                        medico: state.currentDoctor,
                        tipo: "texto"
                    });
                    
                    // Atualizar chat
                    renderChatHistory(paciente);
                    
                    // Limpar campo
                    DOM.messageInput.value = '';
                    DOM.btnSendMessage.disabled = true;
                    break;
                }
            }
        }

        // Abrir modal de alta
        function openAltaModal() {
            // Preencher data/hora atual como padr√£o
            const now = new Date();
            const year = now.getFullYear();
            const month = String(now.getMonth() + 1).padStart(2, '0');
            const day = String(now.getDate()).padStart(2, '0');
            const hours = String(now.getHours()).padStart(2, '0');
            const minutes = String(now.getMinutes()).padStart(2, '0');
            
            DOM.dataAlta.value = `${year}-${month}-${day}T${hours}:${minutes}`;
            DOM.altaModal.classList.add('active');
            DOM.tipoAlta.focus();
        }

        // Abrir modal novo setor
        function openNewSetorModal() {
            // Resetar turnos
            DOM.turnosContainer.innerHTML = '';
            addTurno();
            
            DOM.newSetorModal.classList.add('active');
            DOM.setorName.focus();
        }

        // Abrir modal novo paciente
        function openNewPacienteModal(setorId) {
            DOM.newPacienteModal.setAttribute('data-setor', setorId);
            DOM.newPacienteModal.classList.add('active');
            DOM.pacienteName.focus();
        }
        
        // Abrir modal de passagem de plant√£o
        function openPassPlantaoModal() {
            const now = new Date();
            const dateStr = now.toLocaleDateString('pt-BR');
            const timeStr = now.toLocaleTimeString('pt-BR', {hour: '2-digit', minute:'2-digit'});
            DOM.assinatura.value = `${state.currentDoctor} - ${dateStr} ${timeStr}`;
            DOM.passPlantaoModal.classList.add('active');
            DOM.medicoRecebe.focus();
        }

        // Atualizar hora atual
        function updateTime() {
            const now = new Date();
            const timeString = now.toLocaleTimeString('pt-BR', {
                hour: '2-digit',
                minute: '2-digit'
            });
            document.getElementById('currentTime').textContent = timeString;
        }

        // Mostrar toast
        function showToast(message, type = 'success') {
            DOM.toast.className = `toast ${type === 'error' ? 'toast-error' : 'toast-success'}`;
            DOM.toastMessage.textContent = message;
            DOM.toast.classList.add('show');
            
            setTimeout(() => {
                DOM.toast.classList.remove('show');
            }, 3000);
        }

        // Inicializar aplica√ß√£o
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>